<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Akademiska Hus - Felanmälning</title>
  <link rel="stylesheet" href="css/app.css">
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
</head>
<body>

  <div id="out"></div>

<div class="container">
  <div class="imagePreview">
    <p class="startText">
      Hej och välkommen till felanmälningsappen! Här kan du göra felanmälningar kopplade till ditt campusområde. Din felanmälan kommer att behandlas av behörig personal och förhoppningsvis kan vi lösa problemet snabbare än du hinner reagera.
    <br>
    <br>
    Börja med att ta en bild, eller flera, som visar felet så tydligt som möjligt. Klicka sedan på "fortsätt".</p>
  </div>

  <div class="bottomContianer">

    <div class="urgentContainer">
      <svg class="urgentIconSmall" width="38" height="40" viewBox="0 0 38 40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <defs>
          <path d="M1.33 28.67h29.34L16 3.33 1.33 28.67zm16-4h-2.66V22h2.66v2.67zm0-5.34h-2.66V14h2.66v5.33z" id="a"/>
        </defs>
        <g fill="none" fill-rule="evenodd">
          <g transform="translate(2 -3)">
            <mask id="b" fill="#fff">
              <use xlink:href="#a"/>
            </mask>
            <g mask="url(#b)" fill="#E3004A">
              <path d="M0 0h32v32H0z"/>
            </g>
          </g>
          <text font-family="Arial-BoldMT, Arial" font-size="13" font-weight="bold" letter-spacing=".27" fill="#141414" transform="translate(-3 -3)">
            <tspan x="3.05" y="42">Akut</tspan> <tspan x="33.01" y="42">?</tspan>
          </text>
        </g>
      </svg>

      <svg class="hamburger" width="24" height="16" viewBox="0 0 24 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <defs>
          <path d="M4 24h24v-2.67H4V24zm0-6.67h24v-2.66H4v2.66zM4 8v2.67h24V8H4z" id="c"/>
        </defs>
        <g transform="translate(-4 -8)" fill="none" fill-rule="evenodd">
          <mask id="d" fill="#fff">
            <use xlink:href="#c"/>
          </mask>
          <g mask="url(#d)" fill="#000" fill-opacity=".87">
            <path d="M0 0h32v32H0z"/>
          </g>
        </g>
      </svg>
    </div> <!-- End urgentContainer -->

    <div class="inputContainer">

      <input type="file" class="fileElem" multiple style="display:none" onchange="handleFiles(this.files)">

      <svg onclick="geoFindMe()" class="fileSelect" width="94" height="94" viewBox="0 0 94 94" xmlns="http://www.w3.org/2000/svg">
        <g fill="none" fill-rule="evenodd">
          <circle stroke="#D5D5D5" stroke-width="3" cx="47" cy="47" r="45.5"/>
          <circle fill="#00A388" cx="47" cy="47" r="41"/>
        </g>
      </svg>

    </div> <!-- End inputContianer -->

    <div class="continueContainer">
      <a class="continueButton" href="location.html">
        <svg class="continueIcon" width="92" height="22" viewBox="0 0 92 22" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <defs>
            <path id="e" d="M16 5.33l-1.88 1.88 7.44 7.46H5.33v2.66h16.23l-7.44 7.46L16 26.67 26.67 16z"/>
          </defs>
          <g fill="none" fill-rule="evenodd">
            <g transform="translate(65 -5)">
              <mask id="f" fill="#fff">
                <use xlink:href="#e"/>
              </mask>
              <g mask="url(#f)" fill="#00A388">
                <path d="M0 0h32v32H0z"/>
              </g>
            </g>
            <text font-family="Arial-BoldMT, Arial" font-size="16" font-weight="bold" fill="#000" transform="translate(-11 -5)">
              <tspan x="10.22" y="22">Fortsätt</tspan>
            </text>
          </g>
        </svg>
      </a>
    </div> <!-- End continueContainer -->

  </div> <!-- End bottomContianer -->

  <div class="modalOverlay">

  </div>
  <div class="urgentModalContainer">
    <div class="urgentModal">

      <div class="urgentHeader">
        <img class="closeUrgentModalIcon" src="./images/x.svg" alt="">

        <div class="urgentIcons">
          <img class="largeWarningIcon" src="./images/akut_warning_largest.svg" alt="">
          <div class="smallIcons">
          <img class="waterIcon" src="./images/akut_water.svg" alt="">
          <img class="electricityIcon" src="./images/akut_electricity.svg" alt="">
          <img class="pestIcon" src="./images/akut_pest.svg" alt="">
          </div>
        </div>
      </div>
      <div class="urgentText">
      <p>Akuta fel handla om stopp i avlopp med stigande vatten som följd, vatten som strömmar från en ledning eller ett strömavbrott.</p>
      <p>Det kan också handla om fel som medför risk för vatten- eller personskada.</p>
      <p>Välj ditt område från listan nedan för att anmäla akuta fel. För icke akuta fel i våra byggnader ber vi er att använda vår vanliga felanmälan.</p>
      </div>

      <div class="urgentChooseArea">
        <div class="wrapper">
          <div class="content">
              <ul>
                <a href="#"><li>Lorem ipsum dolor</li></a>
                <a href="#"><li>Consectetur adipisicing</li></a>
                <a href="#"><li>Reprehenderit</li></a>
                <a href="#"><li>Commodo consequat</li></a>
              </ul>
          </div>
              <div class="parent">Välj område</div>
        </div>
      </div>
    </div> <!-- End urgentModal -->
  </div> <!-- End urgentModalContianer -->

</div> <!-- End contianer -->

<div class="map" style="height: 50vh; width:100vw; background: black;">

</div>

<div class="popupContent">
   Hello!
</div>

</body>

<script>
function initMap() {

  definePopupClass();
        // Styles a map in night mode.
        var map = new google.maps.Map(document.querySelector('.map'), {
          center: {lat: 57.70536269999999, lng: 11.936256799999999},
          zoom: 18,
          styles: [
                    {
                        featureType: "water",
                        stylers: [
                            {
                                saturation: 43
                            },
                            {
                                lightness: -11
                            },
                            {
                                hue: "#0088ff"
                            }
                        ]
                    },
                    {
                        featureType: "road",
                        elementType: "geometry.fill",
                        stylers: [
                            {
                                hue: "#ff0000"
                            },
                            {
                                saturation: -100
                            },
                            {
                                lightness: 99
                            }
                        ]
                    },
                    {
                        featureType: "road",
                        elementType: "geometry.stroke",
                        stylers: [
                            {
                                color: "#808080"
                            },
                            {
                                lightness: 54
                            }
                        ]
                    },
                    {
                        featureType: "landscape.man_made",
                        elementType: "geometry.fill",
                        stylers: [
                            {
                                color: "#ece2d9"
                            }
                        ]
                    },
                    {
                        featureType: "poi.park",
                        elementType: "geometry.fill",
                        stylers: [
                            {
                                color: "#ccdca1"
                            }
                        ]
                    },
                    {
                        featureType: "road",
                        elementType: "labels.text.fill",
                        stylers: [
                            {
                                color: "#767676"
                            }
                        ]
                    },
                    {
                        featureType: "road",
                        elementType: "labels.text.stroke",
                        stylers: [
                            {
                                color: "#ffffff"
                            }
                        ]
                    },
                    {
                        featureType: "poi",
                        stylers: [
                            {
                                visibility: "on"
                            }
                        ]
                    },
                    {
                        featureType: "landscape.natural",
                        elementType: "geometry.fill",
                        stylers: [
                            {
                                visibility: "on"
                            },
                            {
                                color: "#b8cb93"
                            }
                        ]
                    },
                    {
                        featureType: "poi.park",
                        stylers: [
                            {
                                visibility: "on"
                            }
                        ]
                    },
                    {
                        featureType: "poi.sports_complex",
                        stylers: [
                            {
                                visibility: "on"
                            }
                        ]
                    },
                    {
                        featureType: "poi.medical",
                        stylers: [
                            {
                                visibility: "on"
                            }
                        ]
                    },
                    {
                        featureType: "poi.business",
                        stylers: [
                            {
                                visibility: "on"
                            }
                        ]
                    }
                ]
        });

        setTimeout(function () {

          var marker = new google.maps.Marker({
            animation: google.maps.Animation.DROP,
            position: {lat: 57.70536269999999, lng: 11.936256799999999},
            map: map,
            title: 'Hello World!'
          });
        }, 1000);

        var popup = new Popup(
          new google.maps.LatLng(57.70536269999999, 11.936251799999999),
          document.querySelector('.popupContent'));
          popup.setMap(map);
      }

      function definePopupClass() {
        /**
         * A customized popup on the map.
         * @param {!google.maps.LatLng} position
         * @param {!Element} content
         * @constructor
         * @extends {google.maps.OverlayView}
         */
        Popup = function(position, content) {
          this.position = position;

          content.classList.add('popup-bubble-content');

          var pixelOffset = document.createElement('div');
          pixelOffset.classList.add('popup-bubble-anchor');
          pixelOffset.appendChild(content);

          this.anchor = document.createElement('div');
          this.anchor.classList.add('popup-tip-anchor');
          this.anchor.appendChild(pixelOffset);

          // Optionally stop clicks, etc., from bubbling up to the map.
          this.stopEventPropagation();
        };

        // NOTE: google.maps.OverlayView is only defined once the Maps API has
  // loaded. That is why Popup is defined inside initMap().
  Popup.prototype = Object.create(google.maps.OverlayView.prototype);

  /** Called when the popup is added to the map. */
  Popup.prototype.onAdd = function() {
    this.getPanes().floatPane.appendChild(this.anchor);
  };

  /** Called when the popup is removed from the map. */
  Popup.prototype.onRemove = function() {
    if (this.anchor.parentElement) {
      this.anchor.parentElement.removeChild(this.anchor);
    }
  };

  /** Called when the popup needs to draw itself. */
  Popup.prototype.draw = function() {
    var divPosition = this.getProjection().fromLatLngToDivPixel(this.position);
    // Hide the popup when it is far out of view.
    var display =
        Math.abs(divPosition.x) < 4000 && Math.abs(divPosition.y) < 4000 ?
        'block' :
        'none';

    if (display === 'block') {
      this.anchor.style.left = divPosition.x + 'px';
      this.anchor.style.top = divPosition.y + 'px';
    }
    if (this.anchor.style.display !== display) {
      this.anchor.style.display = display;
    }
  };

  /** Stops clicks/drags from bubbling up to the map. */
  Popup.prototype.stopEventPropagation = function() {
    var anchor = this.anchor;
    anchor.style.cursor = 'auto';

    ['click', 'dblclick', 'contextmenu', 'wheel', 'mousedown', 'touchstart',
     'pointerdown']
        .forEach(function(event) {
          anchor.addEventListener(event, function(e) {
            e.stopPropagation();
          });
        });
  };
      }
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCYHmuFEeJ7F_eeR15nQv5gftsYLixa4b0&callback=initMap"
  async defer></script>
  <script src="js/app.js"></script>
</html>
